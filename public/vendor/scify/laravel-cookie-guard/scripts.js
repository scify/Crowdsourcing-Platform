document.addEventListener("DOMContentLoaded",function(){u(),k(),E()});function u(){document.querySelectorAll(".accordion-button").forEach(e=>{e.removeEventListener("click",d)}),document.querySelectorAll(".accordion-button").forEach(e=>{e.addEventListener("click",d)})}function d(e){e.stopPropagation();const t=e.currentTarget;f(t)}function f(e){const t=document.querySelector(e.dataset.target);document.querySelectorAll(".accordion-collapse").forEach(o=>{if(o!==t){o.classList.remove("show");const n=document.querySelector(`[data-target="#${o.id}"]`);n&&(n.classList.add("collapsed"),window.cookies_consent_translations&&(n.textContent=window.cookies_consent_translations.read_more))}}),t.classList.contains("show")?(t.classList.remove("show"),e.classList.add("collapsed"),window.cookies_consent_translations&&(e.textContent=window.cookies_consent_translations.read_more)):(t.classList.add("show"),e.classList.remove("collapsed"),window.cookies_consent_translations&&(e.textContent=window.cookies_consent_translations.read_less))}function k(){const e=document.getElementById("scify-cookies-consent"),t=document.getElementById("scify-cookie-consent-floating-button"),o=e.dataset.showFloatingButton==="true"||e.dataset.showFloatingButton==="1",n=e.dataset.hideFloatingButtonOnMobile==="true"||e.dataset.hideFloatingButtonOnMobile==="1",s=e.dataset.cookiePrefix;let i=b(s+"cookies_consent");g(e,t,o,n,i),r(i),y({"customise-cookies":h,"accept-all-cookies":p,"accept-selected-cookies":w,"reject-optional-cookies":B})}function y(e){for(const[t,o]of Object.entries(e)){const n=document.getElementById(t);n&&n.addEventListener("click",o)}}function g(e,t,o,n,s){l()?e.style.display="block":m(e,t,o,n,s)}function m(e,t,o,n,s){s?(e.style.display="none",o&&t&&(t.style.display=n&&window.innerWidth<768?"none":"block")):e.style.display="block"}function r(e){if(e){const t=JSON.parse(e);for(const o in t){const n=document.getElementById(o);n&&(n.checked=t[o])}}}function h(){const e=document.getElementById("cookie-categories-container");e.closest(".scify-cookies-consent-banner").style.width="650px",e.classList.remove("display-none"),document.getElementById("customise-cookies").closest(".button-col").classList.add("display-none"),document.getElementById("accept-selected-cookies").closest(".button-col").classList.remove("display-none")}function p(){a(c(!0))}function w(){a(c())}function B(){a(c(!1,"strictly_necessary"))}function c(e=!1,t=null){const o={};return document.querySelectorAll(".cookie-category").forEach(n=>{o[n.id]=e||n.id===t||n.checked}),o}function a(e){const t=document.getElementById("scify-cookies-consent"),o=document.getElementById("scify-cookie-consent-floating-button"),n=t.dataset.showFloatingButton==="true"||t.dataset.showFloatingButton==="1",s=t.dataset.cookiePrefix;e.locale=t.dataset.locale,l()||(t.style.display="none",n&&(o.style.display="block")),console.log("ajax url",t.dataset.ajaxUrl),fetch(t.dataset.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(e)}).then(i=>i.json()).then(i=>{i.success&&(L(s+"cookies_consent",JSON.stringify(e),30),r(JSON.stringify(e)),C(i.message))})}function C(e){const t=document.getElementById("scify-cookies-consent-wrapper");if(t){const o=document.createElement("div");o.classList.add("cookie-success-message"),o.innerText=e,t.appendChild(o),setTimeout(()=>{o.classList.add("show")},100),setTimeout(()=>{o.classList.remove("show"),setTimeout(()=>{o.remove()},1e3)},4e3)}}function E(){const e=document.getElementById("cookie-policy-link");e&&e.addEventListener("click",function(){S("cookieConsent")})}function l(){const e=document.getElementById("scify-cookies-consent");return e.dataset.onCookiesPage==="true"||e.dataset.onCookiesPage==="1"}function L(e,t,o){let n="";{const s=new Date;s.setTime(s.getTime()+o*24*60*60*1e3),n="; expires="+s.toUTCString()}document.cookie=e+"="+(t||"")+n+"; path=/"}function b(e){const t=e+"=",o=document.cookie.split(";");for(const n of o){let s=n.trim();if(s.startsWith(t))return s.substring(t.length,s.length)}return null}function S(e){document.cookie=e+"=; Max-Age=-99999999;"}window.toggleCookieBanner=function(){if(l())return;const e=document.getElementById("scify-cookies-consent"),t=document.getElementById("scify-cookie-consent-floating-button"),o=e.dataset.showFloatingButton==="true"||e.dataset.showFloatingButton==="1";e.style.display==="none"||e.style.display===""?(console.log("showing banner"),e.style.display="block",o&&(t.style.display="none")):(console.log("hiding banner"),e.style.display="none",o&&(t.style.display="block"))};
