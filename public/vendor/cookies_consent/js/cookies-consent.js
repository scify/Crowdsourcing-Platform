document.addEventListener("DOMContentLoaded",function(){document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".accordion-button").forEach(e=>{e.addEventListener("click",function(){const t=document.querySelector(e.dataset.target);document.querySelectorAll(".accordion-collapse").forEach(n=>{n.classList.remove("show")}),document.querySelectorAll(".accordion-button").forEach(n=>{n.classList.add("collapsed")}),t&&(t.classList.toggle("show"),e.classList.toggle("collapsed"))})})});const g=document.getElementById("accept-all-cookies"),u=document.getElementById("accept-selected-cookies"),k=document.getElementById("reject-optional-cookies"),o=document.getElementById("cookies-consent-banner"),s=document.getElementById("scify-cookie-consent-floating-button"),l=o.dataset.showFloatingButton==="true"||o.dataset.showFloatingButton==="1",m=o.dataset.hideFloatingButtonOnMobile==="true"||o.dataset.hideFloatingButtonOnMobile==="1";let a=E("cookieConsent");p(),d();function y(){return window.location.href.includes("/cookie-policy")}function p(){y()?(o.style.display="block",l&&s&&(m&&window.innerWidth<768?s.style.display="none":s.style.display="block")):a?(o.style.display="none",l&&s&&(s.style.display="block")):o.style.display="block"}function d(){if(a){const e=JSON.parse(a);for(const t in e){const n=document.getElementById(t);n&&(n.checked=e[t])}}}g.addEventListener("click",function(){const e={};document.querySelectorAll(".cookie-category").forEach(t=>{e[t.id]=!0}),r(e)}),u&&u.addEventListener("click",function(){const e={};document.querySelectorAll(".cookie-category").forEach(t=>{e[t.id]=t.checked}),r(e)}),k.addEventListener("click",function(){const e={};document.querySelectorAll(".cookie-category").forEach(t=>{e[t.id]=t.id==="strictly_necessary"}),r(e)});function r(e){fetch(o.dataset.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{if(t.success){const n=o.dataset.cookiePrefix;h(n+"cookies_consent",JSON.stringify(e),30),d(),y()||(o.style.display="none",l&&(s.style.display="block"));const c=document.createElement("div");c.classList.add("cookie-success-message"),c.innerText=t.message,document.body.appendChild(c),setTimeout(()=>{c.classList.add("show")},100),setTimeout(()=>{c.classList.remove("show"),setTimeout(()=>{c.remove()},1e3)},4e3),a=JSON.stringify(e),d()}})}window.toggleCookieBanner=function(){o.style.display==="none"||o.style.display===""?(o.style.display="block",l&&(s.style.display="none")):(o.style.display="none",l&&(s.style.display="block"))};const f=document.getElementById("cookie-policy-link");f&&f.addEventListener("click",function(){B("cookieConsent")});function h(e,t,n){let c="";{const i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3),c="; expires="+i.toUTCString()}document.cookie=e+"="+(t||"")+c+"; path=/"}function E(e){const t=e+"=",n=document.cookie.split(";");for(let c=0;c<n.length;c++){let i=n[c];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null}function B(e){document.cookie=e+"=; Max-Age=-99999999;"}});
