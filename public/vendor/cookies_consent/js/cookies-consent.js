document.addEventListener("DOMContentLoaded",function(){document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".accordion-button").forEach(e=>{e.addEventListener("click",function(){const t=document.querySelector(e.dataset.target);document.querySelectorAll(".accordion-collapse").forEach(o=>{o.classList.remove("show")}),document.querySelectorAll(".accordion-button").forEach(o=>{o.classList.add("collapsed")}),t&&(t.classList.toggle("show"),e.classList.toggle("collapsed"))})})});const m=document.getElementById("accept-all-cookies"),u=document.getElementById("accept-selected-cookies"),k=document.getElementById("reject-optional-cookies"),c=document.getElementById("cookies-consent-banner"),s=document.getElementById("scify-cookie-consent-floating-button"),l=c.dataset.showFloatingButton==="true"||c.dataset.showFloatingButton==="1";let a=h("cookieConsent");g(),d();function y(){return window.location.href.includes("/cookie-policy")}function g(){y()?(c.style.display="block",l&&s&&(s.style.display="none")):a?(c.style.display="none",l&&s&&(s.style.display="block")):c.style.display="block"}function d(){if(a){const e=JSON.parse(a);for(const t in e){const o=document.getElementById(t);o&&(o.checked=e[t])}}}m.addEventListener("click",function(){const e={};document.querySelectorAll(".cookie-category").forEach(t=>{e[t.id]=!0}),r(e)}),u&&u.addEventListener("click",function(){const e={};document.querySelectorAll(".cookie-category").forEach(t=>{e[t.id]=t.checked}),r(e)}),k.addEventListener("click",function(){const e={};document.querySelectorAll(".cookie-category").forEach(t=>{e[t.id]=t.id==="strictly_necessary"}),r(e)});function r(e){fetch(c.dataset.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{if(t.success){const o=c.dataset.cookiePrefix;p(o+"cookies_consent",JSON.stringify(e),30),d(),y()||(c.style.display="none",l&&(s.style.display="block"));const n=document.createElement("div");n.classList.add("cookie-success-message"),n.innerText=t.message,document.body.appendChild(n),setTimeout(()=>{n.classList.add("show")},100),setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>{n.remove()},1e3)},4e3),a=JSON.stringify(e),d()}})}window.toggleCookieBanner=function(){c.style.display==="none"||c.style.display===""?(c.style.display="block",l&&(s.style.display="none")):(c.style.display="none",l&&(s.style.display="block"))};const f=document.getElementById("cookie-policy-link");f&&f.addEventListener("click",function(){E("cookieConsent")});function p(e,t,o){let n="";{const i=new Date;i.setTime(i.getTime()+o*24*60*60*1e3),n="; expires="+i.toUTCString()}document.cookie=e+"="+(t||"")+n+"; path=/"}function h(e){const t=e+"=",o=document.cookie.split(";");for(let n=0;n<o.length;n++){let i=o[n];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null}function E(e){document.cookie=e+"=; Max-Age=-99999999;"}});
