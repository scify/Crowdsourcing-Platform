# .husky/pre-commit

# Load .env variables from the project root, line by line
if [ -f .env ]; then
    while IFS='=' read -r key value || [ -n "$key" ]; do
        # Skip lines that are comments or do not contain valid key=value format
        if echo "$key" | grep -Eq '^[A-Za-z_][A-Za-z0-9_]*$'; then
            export "$key=$value"
        fi
    done < .env
fi

# Check if USE_DOCKER is set to "true"
if [ "$USE_DOCKER" = "true" ]; then
    echo "Running Pint in Docker..."
    docker compose exec -T php vendor/bin/pint
else
    echo "Running Pint locally..."
    vendor/bin/pint
fi

# Stage any changes Pint made, in the current commit (the commit that is about to be made)
git add .
